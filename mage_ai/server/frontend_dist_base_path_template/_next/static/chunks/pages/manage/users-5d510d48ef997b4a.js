(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1911],{94629:function(e,r,t){"use strict";t.d(r,{Z:function(){return g}});var n=t(82394),o=t(21831),i=t(82684),u=t(50724),s=t(82555),c=t(97618),a=t(70613),f=t(92272),l=t(68899),d=t(28598);function p(e,r){var t=e.children,n=e.noPadding;return(0,d.jsx)(l.HS,{noPadding:n,ref:r,children:t})}var h=i.forwardRef(p),b=t(62547),v=t(82571),O=t(77417),m=t(46684),w=t(75375);function j(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function P(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?j(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function y(e,r){e.addProjectBreadcrumbToCustomBreadcrumbs;var t=e.after,n=e.afterHeader,i=e.afterHidden,p=e.afterWidth,j=e.afterWidthOverride,y=e.appendBreadcrumbs,g=e.before,Z=e.beforeHeader,E=e.beforeWidth,S=e.breadcrumbs,_=e.children,k=e.contained,x=e.errors,I=e.headerMenuItems,R=e.headerOffset,A=e.hideAfterCompletely,W=e.mainContainerHeader,C=e.navigationItems,B=e.setAfterHidden,N=e.setAfterWidth,H=e.setBeforeWidth,D=e.setErrors,M=e.subheaderChildren,U=e.subheaderNoPadding,F=e.title,T=e.uuid,L=(0,w.Z)(T,{beforeResizeOffset:w.H,setWidthAfter:N,setWidthBefore:H,widthAfter:p,widthBefore:E,widthOverrideAfter:j}),V=L.mainContainerRef,G=L.mousedownActiveAfter,z=L.mousedownActiveBefore,K=L.setMousedownActiveAfter,X=L.setMousedownActiveBefore,q=L.setWidthAfter,Y=L.setWidthBefore,J=L.widthAfter,Q=L.widthBefore,$=(0,O.Z)().project,ee=[];return S&&ee.push.apply(ee,(0,o.Z)(S)),null!=S&&S.length&&!y||!$||null!=S&&S.length||ee.unshift({bold:!y,label:function(){return F}}),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a.Z,{title:F}),(0,d.jsx)(f.Z,{breadcrumbs:ee,menuItems:I}),(0,d.jsxs)(l.Nk,{ref:r,children:[0!==(null==C?void 0:C.length)&&(0,d.jsx)(l.lm,{showMore:!0,children:(0,d.jsx)(v.Z,{navigationItems:C,showMore:!0})}),(0,d.jsx)(c.Z,{flex:1,flexDirection:"column",children:(0,d.jsxs)(b.Z,{after:t,afterHeader:n,afterHeightOffset:m.Mz,afterHidden:i,afterMousedownActive:G,afterWidth:J,before:g,beforeHeader:Z,beforeHeightOffset:m.Mz,beforeMousedownActive:z,beforeWidth:g?Q:l.k1,contained:k,headerOffset:R,hideAfterCompletely:!t||A,leftOffset:g?l.k1:null,mainContainerHeader:W,mainContainerRef:V,setAfterHidden:B,setAfterMousedownActive:K,setAfterWidth:q,setBeforeMousedownActive:X,setBeforeWidth:Y,children:[M&&(0,d.jsx)(h,{noPadding:U,children:M}),_]})})]}),x&&(0,d.jsx)(u.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null==D?void 0:D(null)},children:(0,d.jsx)(s.Z,P(P({},x),{},{onClose:function(){return null==D?void 0:D(null)}}))})]})}var g=i.forwardRef(y)},93808:function(e,r,t){"use strict";t.d(r,{Z:function(){return _}});var n=t(77837),o=t(26304),i=t(62243),u=t(29385),s=t(80022),c=t(13692),a=t(93189),f=t(15544),l=t(82394),d=t(38860),p=t.n(d),h=t(82684),b=t(56663),v=t.n(b),O=t(40761),m=t(34661),w=t(36105),j=t(50178),P=t(69419),y=t(28598),g=["auth"];function Z(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function E(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Z(Object(t),!0).forEach((function(r){(0,l.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function S(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,f.Z)(e);if(r){var o=(0,f.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,a.Z)(this,t)}}function _(e){return function(r){(0,c.Z)(f,r);var t,a=S(f);function f(){var e;(0,i.Z)(this,f);for(var r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];return e=a.call.apply(a,[this].concat(t)),(0,l.Z)((0,s.Z)(e),"state",{auth:new O.Z(e.props.token)}),e}return(0,u.Z)(f,[{key:"componentDidMount",value:function(){this.setState({auth:new O.Z(this.props.token)})}},{key:"render",value:function(){var r=this.props,t=(r.auth,(0,o.Z)(r,g));return(0,y.jsx)(e,E({auth:this.state.auth},t))}}],[{key:"getInitialProps",value:(t=(0,n.Z)(p().mark((function r(t){var n,o,i,u,s,c,a,f,l;return p().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=v()(t),o=(0,j.ex)(t),i=o.id,u=n[m.Mv],s=n[w.qt],c=new O.Z(u),a=E(E({},t),{},{auth:c,currentGroupId:i,theme:s}),(0,j.YB)(t)&&c.isExpired&&(console.log("OAuth token has expired."),f=E(E({},t.query),{},{redirect_url:t.asPath}),(0,P.nL)("/sign-in?".concat((0,P.uM)(f)),t.res)),!e.getInitialProps){r.next=12;break}return r.next=10,e.getInitialProps(a);case 10:return l=r.sent,r.abrupt("return",E(E({},l),{},{auth:c,currentGroupId:i,theme:s}));case 12:return r.abrupt("return",a);case 13:case"end":return r.stop()}}),r)}))),function(e){return t.apply(this,arguments)})}]),f}(h.Component)}},75083:function(e,r,t){"use strict";t.d(r,{HF:function(){return i},L6:function(){return n}});var n,o=t(72473);function i(e,r,t){var i=e.owner,u=(e.roles,[{Icon:o.WorkspacesIcon,id:n.WORKSPACES,isSelected:function(){return n.WORKSPACES===t},label:function(){return"Workspaces"},linkProps:{href:"/manage"}},{Icon:o.NavDashboard,id:n.OVERVIEW,isSelected:function(){return n.OVERVIEW===t},label:function(){return"Overview"},linkProps:{href:"/manage/overview"}},{Icon:o.Schedule,id:n.PIPELINE_RUNS,isSelected:function(){return n.PIPELINE_RUNS===t},label:function(){return"Pipeline runs"},linkProps:{href:"/manage/pipeline-runs"}}]);return i&&u.push({Icon:o.WorkspacesUsersIcon,id:n.USERS,isSelected:function(){return n.USERS===t},label:function(){return"Users"},linkProps:{href:"/manage/users"}}),u.push.apply(u,[{Icon:o.File,id:n.FILE_BROWSER,isSelected:function(){return n.FILE_BROWSER===t},label:function(){return"File browser"},linkProps:{href:"/manage/files"}},{Icon:o.Settings,id:n.SETTINGS,isSelected:function(){return n.SETTINGS===t},label:function(){return"Settings"},linkProps:{href:"/manage/settings"}}]),u}!function(e){e.OVERVIEW="overview",e.PIPELINE_RUNS="pipeline_runs",e.WORKSPACES="workspaces",e.USERS="users",e.SETTINGS="settings",e.FILE_BROWSER="file_browser"}(n||(n={}))},59533:function(e,r,t){"use strict";var n=t(82684),o=t(94629),i=t(35686),u=t(50018),s=t(70515),c=t(75083),a=t(28598);r.Z=function(e){var r=e.before,t=e.breadcrumbs,f=void 0===t?[]:t,l=e.children,d=e.errors,p=e.headerOffset,h=e.mainContainerHeader,b=e.pageName,v=e.setErrors,O=e.subheaderChildren,m=i.ZP.statuses.list().data,w=(0,n.useMemo)((function(){var e,r;return null==m||null===(e=m.statuses)||void 0===e||null===(r=e[0])||void 0===r?void 0:r.project_type}),[m]),j=(0,u.Z)()||{};return(0,a.jsx)(o.Z,{before:r,beforeWidth:r?50*s.iI:0,breadcrumbs:f,errors:d,headerOffset:p,mainContainerHeader:h,navigationItems:(0,c.HF)(j,w,b),setErrors:v,subheaderChildren:O,title:"Workspaces",uuid:"workspaces/index",children:l})}},12222:function(e,r,t){"use strict";t.r(r);var n=t(77837),o=t(82394),i=t(38860),u=t.n(i),s=t(82684),c=t(34376),a=t(71180),f=t(85854),l=t(93808),d=t(38276),p=t(75499),h=t(30160),b=t(59533),v=t(35686),O=t(98464),m=t(72473),w=t(70515),j=t(75083),P=t(72619),y=t(50178),g=t(42122),Z=t(69419),E=t(28598);function S(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?S(Object(t),!0).forEach((function(r){(0,o.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function k(){var e=(0,c.useRouter)(),r=(0,s.useState)(null),t=r[0],n=r[1],o=((0,y.PR)(null==e?void 0:e.basePath)||{}).owner,i=(0,s.useState)(null),u=i[0],l=i[1],S=v.ZP.users.list({},{revalidateOnFocus:!1}),k=S.data;S.mutate;(0,s.useEffect)((function(){(0,P.bB)(k,n)}),[k]);var x=(0,s.useMemo)((function(){return(null==k?void 0:k.users)||[]}),[null==k?void 0:k.users]),I=v.ZP.users.detail(null==u?void 0:u.user_id,{},{revalidateOnFocus:!1}),R=I.data;I.mutate;(0,s.useEffect)((function(){(0,P.bB)(R,n)}),[R]);var A=null==R?void 0:R.user,W=(0,Z.iV)(),C=(0,O.Z)(W);return(0,s.useEffect)((function(){var e=W.add_new_user,r=W.user_id;if(!(0,g.Xy)(W,C)){var t=_(_({},C),W);r?t.user_id=r:delete t.user_id,e?t.add_new_user=e:delete t.add_new_user,l(t)}}),[W,C]),(0,E.jsxs)(b.Z,{breadcrumbs:[{label:function(){return"Workspaces"},linkProps:{as:"/manage",href:"/manage"}},{bold:!0,label:function(){return"Users"}}],errors:t,pageName:j.L6.USERS,children:[o&&(0,E.jsx)(d.Z,{p:w.cd,children:(0,E.jsx)(a.ZP,{beforeIcon:(0,E.jsx)(m.Add,{}),onClick:function(){return e.push("/manage/users/new")},primary:!0,children:"Add new user"})}),(0,E.jsx)(d.Z,{p:w.cd,children:(0,E.jsx)(f.Z,{children:"Users"})}),(0,E.jsx)(p.Z,{columnFlex:[1,1,1],columns:[{uuid:"Username"},{uuid:"Email"},{uuid:"Role"}],isSelectedRow:function(e){var r;return(null===(r=x[e])||void 0===r?void 0:r.id)===(null==A?void 0:A.id)},onClickRow:function(r){var t,n=null===(t=x[r])||void 0===t?void 0:t.id;e.push("/manage/users/[user]","/manage/users/".concat(n))},rows:x.map((function(e){var r=e.email,t=e.roles_display,n=e.roles_new,o=e.username;return[(0,E.jsx)(h.ZP,{bold:!0,children:o},"username"),(0,E.jsx)(h.ZP,{default:!0,children:r},"email"),(0,E.jsx)(h.ZP,{default:!0,children:n&&n[0]?n[0].name:t},"roles")]})),uuid:"pipeline-runs"})]})}k.getInitialProps=(0,n.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)}))),r.default=(0,l.Z)(k)},72695:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage/users",function(){return t(12222)}])},80022:function(e,r,t){"use strict";function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t.d(r,{Z:function(){return n}})},15544:function(e,r,t){"use strict";function n(e){return n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}t.d(r,{Z:function(){return n}})},13692:function(e,r,t){"use strict";t.d(r,{Z:function(){return o}});var n=t(61049);function o(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&(0,n.Z)(e,r)}},93189:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});var n=t(12539),o=t(80022);function i(e,r){if(r&&("object"===n(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return(0,o.Z)(e)}}},function(e){e.O(0,[449,9774,2888,179],(function(){return r=72695,e(e.s=r);var r}));var r=e.O();_N_E=r}]);