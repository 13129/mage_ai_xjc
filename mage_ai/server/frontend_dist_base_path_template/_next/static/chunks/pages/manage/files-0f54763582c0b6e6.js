(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9015],{94629:function(e,t,r){"use strict";r.d(t,{Z:function(){return j}});var n=r(82394),i=r(21831),o=r(82684),u=r(50724),s=r(82555),c=r(97618),a=r(70613),f=r(92272),l=r(68899),d=r(28598);function p(e,t){var r=e.children,n=e.noPadding;return(0,d.jsx)(l.HS,{noPadding:n,ref:t,children:r})}var h=o.forwardRef(p),b=r(62547),v=r(82571),O=r(77417),m=r(46684),w=r(75375);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t){e.addProjectBreadcrumbToCustomBreadcrumbs;var r=e.after,n=e.afterHeader,o=e.afterHidden,p=e.afterWidth,y=e.afterWidthOverride,g=e.appendBreadcrumbs,j=e.before,E=e.beforeHeader,S=e.beforeWidth,Z=e.breadcrumbs,I=e.children,k=e.contained,x=e.errors,R=e.headerMenuItems,_=e.headerOffset,A=e.hideAfterCompletely,W=e.mainContainerHeader,C=e.navigationItems,B=e.setAfterHidden,H=e.setAfterWidth,N=e.setBeforeWidth,M=e.setErrors,F=e.subheaderChildren,T=e.subheaderNoPadding,D=e.title,L=e.uuid,U=(0,w.Z)(L,{beforeResizeOffset:w.H,setWidthAfter:H,setWidthBefore:N,widthAfter:p,widthBefore:S,widthOverrideAfter:y}),V=U.mainContainerRef,G=U.mousedownActiveAfter,K=U.mousedownActiveBefore,z=U.setMousedownActiveAfter,q=U.setMousedownActiveBefore,X=U.setWidthAfter,Y=U.setWidthBefore,J=U.widthAfter,Q=U.widthBefore,$=(0,O.Z)().project,ee=[];return Z&&ee.push.apply(ee,(0,i.Z)(Z)),null!=Z&&Z.length&&!g||!$||null!=Z&&Z.length||ee.unshift({bold:!g,label:function(){return D}}),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a.Z,{title:D}),(0,d.jsx)(f.Z,{breadcrumbs:ee,menuItems:R}),(0,d.jsxs)(l.Nk,{ref:t,children:[0!==(null==C?void 0:C.length)&&(0,d.jsx)(l.lm,{showMore:!0,children:(0,d.jsx)(v.Z,{navigationItems:C,showMore:!0})}),(0,d.jsx)(c.Z,{flex:1,flexDirection:"column",children:(0,d.jsxs)(b.Z,{after:r,afterHeader:n,afterHeightOffset:m.Mz,afterHidden:o,afterMousedownActive:G,afterWidth:J,before:j,beforeHeader:E,beforeHeightOffset:m.Mz,beforeMousedownActive:K,beforeWidth:j?Q:l.k1,contained:k,headerOffset:_,hideAfterCompletely:!r||A,leftOffset:j?l.k1:null,mainContainerHeader:W,mainContainerRef:V,setAfterHidden:B,setAfterMousedownActive:z,setAfterWidth:X,setBeforeMousedownActive:q,setBeforeWidth:Y,children:[F&&(0,d.jsx)(h,{noPadding:T,children:F}),I]})})]}),x&&(0,d.jsx)(u.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null==M?void 0:M(null)},children:(0,d.jsx)(s.Z,P(P({},x),{},{onClose:function(){return null==M?void 0:M(null)}}))})]})}var j=o.forwardRef(g)},93808:function(e,t,r){"use strict";r.d(t,{Z:function(){return I}});var n=r(77837),i=r(26304),o=r(62243),u=r(29385),s=r(80022),c=r(13692),a=r(93189),f=r(15544),l=r(82394),d=r(38860),p=r.n(d),h=r(82684),b=r(56663),v=r.n(b),O=r(40761),m=r(34661),w=r(36105),y=r(50178),P=r(69419),g=r(28598),j=["auth"];function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.Z)(e);if(t){var i=(0,f.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,a.Z)(this,r)}}function I(e){return function(t){(0,c.Z)(f,t);var r,a=Z(f);function f(){var e;(0,o.Z)(this,f);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=a.call.apply(a,[this].concat(r)),(0,l.Z)((0,s.Z)(e),"state",{auth:new O.Z(e.props.token)}),e}return(0,u.Z)(f,[{key:"componentDidMount",value:function(){this.setState({auth:new O.Z(this.props.token)})}},{key:"render",value:function(){var t=this.props,r=(t.auth,(0,i.Z)(t,j));return(0,g.jsx)(e,S({auth:this.state.auth},r))}}],[{key:"getInitialProps",value:(r=(0,n.Z)(p().mark((function t(r){var n,i,o,u,s,c,a,f,l;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=v()(r),i=(0,y.ex)(r),o=i.id,u=n[m.Mv],s=n[w.qt],c=new O.Z(u),a=S(S({},r),{},{auth:c,currentGroupId:o,theme:s}),(0,y.YB)(r)&&c.isExpired&&(console.log("OAuth token has expired."),f=S(S({},r.query),{},{redirect_url:r.asPath}),(0,P.nL)("/sign-in?".concat((0,P.uM)(f)),r.res)),!e.getInitialProps){t.next=12;break}return t.next=10,e.getInitialProps(a);case 10:return l=t.sent,t.abrupt("return",S(S({},l),{},{auth:c,currentGroupId:o,theme:s}));case 12:return t.abrupt("return",a);case 13:case"end":return t.stop()}}),t)}))),function(e){return r.apply(this,arguments)})}]),f}(h.Component)}},75083:function(e,t,r){"use strict";r.d(t,{HF:function(){return o},L6:function(){return n}});var n,i=r(72473);function o(e,t,r){var o=e.owner,u=(e.roles,[{Icon:i.WorkspacesIcon,id:n.WORKSPACES,isSelected:function(){return n.WORKSPACES===r},label:function(){return"Workspaces"},linkProps:{href:"/manage"}},{Icon:i.NavDashboard,id:n.OVERVIEW,isSelected:function(){return n.OVERVIEW===r},label:function(){return"Overview"},linkProps:{href:"/manage/overview"}},{Icon:i.Schedule,id:n.PIPELINE_RUNS,isSelected:function(){return n.PIPELINE_RUNS===r},label:function(){return"Pipeline runs"},linkProps:{href:"/manage/pipeline-runs"}}]);return o&&u.push({Icon:i.WorkspacesUsersIcon,id:n.USERS,isSelected:function(){return n.USERS===r},label:function(){return"Users"},linkProps:{href:"/manage/users"}}),u.push.apply(u,[{Icon:i.File,id:n.FILE_BROWSER,isSelected:function(){return n.FILE_BROWSER===r},label:function(){return"File browser"},linkProps:{href:"/manage/files"}},{Icon:i.Settings,id:n.SETTINGS,isSelected:function(){return n.SETTINGS===r},label:function(){return"Settings"},linkProps:{href:"/manage/settings"}}]),u}!function(e){e.OVERVIEW="overview",e.PIPELINE_RUNS="pipeline_runs",e.WORKSPACES="workspaces",e.USERS="users",e.SETTINGS="settings",e.FILE_BROWSER="file_browser"}(n||(n={}))},59533:function(e,t,r){"use strict";var n=r(82684),i=r(94629),o=r(35686),u=r(50018),s=r(70515),c=r(75083),a=r(28598);t.Z=function(e){var t=e.before,r=e.breadcrumbs,f=void 0===r?[]:r,l=e.children,d=e.errors,p=e.headerOffset,h=e.mainContainerHeader,b=e.pageName,v=e.setErrors,O=e.subheaderChildren,m=o.ZP.statuses.list().data,w=(0,n.useMemo)((function(){var e,t;return null==m||null===(e=m.statuses)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.project_type}),[m]),y=(0,u.Z)()||{};return(0,a.jsx)(i.Z,{before:t,beforeWidth:t?50*s.iI:0,breadcrumbs:f,errors:d,headerOffset:p,mainContainerHeader:h,navigationItems:(0,c.HF)(y,w,b),setErrors:v,subheaderChildren:O,title:"Workspaces",uuid:"workspaces/index",children:l})}},83087:function(e,t,r){"use strict";r.r(t);var n=r(77837),i=r(38860),o=r.n(i),u=r(82684),s=r(65557),c=r(78650),a=r(43449),f=r(90758),l=r(93808),d=r(38276),p=r(59533),h=r(35686),b=r(86735),v=r(15610),O=r(69419),m=r(97133),w=r(75083),y=r(28598);function P(){var e=(0,u.useState)(null),t=e[0],r=e[1],n=(0,O.iV)(),i=n.file_path,o=(0,u.useMemo)((function(){var e=n["file_paths[]"]||[];return Array.isArray(e)||(e=[e]),e}),[n]),l=(0,u.useCallback)((function(e,t){var r=encodeURIComponent(e),n=(0,O.iV)()["file_paths[]"]||[];Array.isArray(n)||(n=[n]),n.includes(r)||n.push(r),(0,v.u)({file_path:r,"file_paths[]":n})}),[]),P=h.ZP.files.list(),g=P.data,j=P.mutate,E=(0,u.useMemo)((function(){return(null==g?void 0:g.files)||[]}),[g]),S=(0,u.useRef)(null),Z=(0,u.useState)(null),I=Z[0],k=Z[1],x=(0,u.useState)([]),R=x[0],_=x[1],A=(0,u.useState)({}),W=A[0],C=A[1],B=(0,u.useMemo)((function(){return(0,y.jsx)(d.Z,{ml:1,mt:1,children:(0,y.jsx)(c.Z,{fetchFiles:j,files:E,openFile:l,ref:S,showError:r,uuid:"pages/manage/files"})})}),[j,E,l,r]);return(0,u.useEffect)((function(){k(i)}),[i]),(0,u.useEffect)((function(){(0,b.fS)(o,R)||_(o)}),[o,R]),(0,y.jsx)(p.Z,{before:B,breadcrumbs:[{label:function(){return"Workspaces"},linkProps:{as:"/manage",href:"/manage"}},{bold:!0,label:function(){return"File browser"}}],errors:t,mainContainerHeader:(0,y.jsx)(m.rK,{secondary:!0,children:(0,y.jsx)(f.ZP,{filePaths:R,filesTouched:W,selectedFilePath:I})}),pageName:w.L6.FILE_BROWSER,children:null==o?void 0:o.map((function(e){return(0,y.jsx)("div",{style:{display:I===e?null:"none"},children:(0,y.jsx)(s.Z,{uuid:"manage/FileEditor/".concat(decodeURIComponent(e)),children:(0,y.jsx)(a.Z,{active:I===e,filePath:e,selectedFilePath:I,setErrors:r,setFilesTouched:C})})},e)}))})}P.getInitialProps=(0,n.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)}))),t.default=(0,l.Z)(P)},90205:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage/files",function(){return r(83087)}])},80022:function(e,t,r){"use strict";function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.d(t,{Z:function(){return n}})},15544:function(e,t,r){"use strict";function n(e){return n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}r.d(t,{Z:function(){return n}})},13692:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(61049);function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(0,n.Z)(e,t)}},93189:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(12539),i=r(80022);function o(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}}},function(e){e.O(0,[449,9774,2888,179],(function(){return t=90205,e(e.s=t);var t}));var t=e.O();_N_E=t}]);